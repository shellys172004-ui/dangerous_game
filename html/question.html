<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Make Your Choice</title>

<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
  height:100vh;
  overflow:hidden;
  font-family:'Orbitron',sans-serif;
  background:radial-gradient(circle at top,#0e1a2f,#05070c);
  color:#00fff0;
}
.ui{height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}
.ui.hidden{display:none}
button{padding:14px 40px;margin:12px;font-family:'Orbitron'}
.transition{position:fixed;inset:0;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none}
.transition.active{opacity:1;pointer-events:auto}
.noModal{position:fixed;inset:0;background:#000c;display:flex;justify-content:center;align-items:center;opacity:0;pointer-events:none}
.noModal.active{opacity:1;pointer-events:auto}
</style>
</head>

<body>

<div class="ui" id="mainUI">
  <h2>Will you be my valentine?</h2>
  <button id="yes">YES</button>
  <button id="no">NO</button>
</div>

<div class="transition" id="transition">
  <button id="back">GO BACK</button>
</div>

<div class="noModal" id="noModal">
  <button id="apology">I meant YES</button>
</div>

<audio id="questionSound" src="questionSound.mp3" loop></audio>
<audio id="heartbeat" src="heartbeat.mp3" loop></audio>
<audio id="happySound" src="happy_happy_happy_cat.mp3"></audio>

<script>
const yes = document.getElementById('yes');
const no = document.getElementById('no');
const back = document.getElementById('back');
const apology = document.getElementById('apology');
const mainUI = document.getElementById('mainUI');
const transition = document.getElementById('transition');
const noModal = document.getElementById('noModal');

const questionSound = document.getElementById('questionSound');
const heartbeat = document.getElementById('heartbeat');
const happySound = document.getElementById('happySound');

questionSound.volume = 0.6;
heartbeat.volume = 0.8;
happySound.volume = 1;

// ðŸ”“ ONE-TIME AUDIO UNLOCK (THIS IS THE IMPORTANT PART)
document.addEventListener('click', () => {
  [questionSound, heartbeat, happySound].forEach(a => {
    a.muted = true;
    a.play().then(() => {
      a.pause();
      a.currentTime = 0;
      a.muted = false;
    }).catch(()=>{});
  });

  // start background question sound
  questionSound.play().catch(()=>{});
}, { once:true });

function showYes(){
  mainUI.classList.add('hidden');
  noModal.classList.remove('active');
  questionSound.pause();
  heartbeat.pause();
  happySound.currentTime = 0;
  happySound.play();
  transition.classList.add('active');
}

yes.onclick = showYes;
apology.onclick = showYes;

back.onclick = () => {
  transition.classList.remove('active');
  mainUI.classList.remove('hidden');
  happySound.pause();
  questionSound.currentTime = 0;
  questionSound.play();
};

no.onclick = () => {
  noModal.classList.add('active');
  questionSound.pause();
  heartbeat.currentTime = 0;
  heartbeat.play();
};
</script>

</body>
</html>
